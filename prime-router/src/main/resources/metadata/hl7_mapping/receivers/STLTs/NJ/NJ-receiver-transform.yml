hl7Class: ca.uhn.hl7v2.model.v251.message.ORU_R01

extends: classpath:/metadata/hl7_mapping/ORU_R01/ORU_R01-base.yml
elements:
  # MSH 3-1
  - name: nj-sending-application-namespace-id
    value: [ '"CDC PRIME - Atlanta, Georgia (Dekalb)"' ]
    hl7Spec: [ MSH-3-1 ]

  # MSH 3-2
  - name: nj-sending-application-universal-id
    value: [ '"2.16.840.1.114222.4.1.237821"' ]
    hl7Spec: [ MSH-3-2 ]

  # MSH 3-3
  - name: nj-sending-application-universal-id-type
    value: [ '"ISO"' ]
    hl7Spec: [ MSH-3-3 ]

  # MSH 4-1
  - name: nj-reporting-facility-name
    value: [ '"CDC PRIME"' ]
    hl7Spec: [ MSH-4-1 ]

  # MSH 4-2
  - name: nj-reporting-facility-id
    value: [ '"11D2030855"' ]
    hl7Spec: [ MSH-4-2 ]

  # MSH 4-3
  - name: nj-reporting-facility-id-type
    value: [ '"CLIA"' ]
    hl7Spec: [ MSH-4-3 ]

  # MSH 5
  - name: nj-receiving-application-namespace-id
    value: [ '"ELRS"' ]
    hl7Spec: [ MSH-5-1 ]

  - name: nj-receiving-application-universal-id
    value: [ '"2.16.840.1.113883.3.1299.5.1.6.1"' ]
    hl7Spec: [ MSH-5-2 ]

  - name: nj-receiving-application-universal-id-type
    value: [ '"ISO"' ]
    hl7Spec: [ MSH-5-3 ]

  # MSH 6
  - name: nj-receiving-facility-namespace-id
    value: [ '"NJDOH"' ]
    hl7Spec: [ MSH-6-1 ]

  - name: nj-receiving-facility-universal-id
    value: [ '"2.16.840.1.113883.3.1299"' ]
    hl7Spec: [ MSH-6-2 ]

  - name: nj-receiving-facility-universal-id-type
    value: [ '"ISO"' ]
    hl7Spec: [ MSH-6-3 ]

  # If the Ordering Provider information is unknown, 
  # complete with the Ordering Facility Information
  # ORC 24.1
  - name: nj-ordering-provider-street1
    condition: 'Bundle.entry.resource.ofType(Practitioner).address.line.exists().not()'
    value: ['Bundle.entry.resource.ofType(Organization).address.line[0]']
    hl7Spec: [/PATIENT_RESULT/ORDER_OBSERVATION/ORC-24-1]

  # ORC 24.2
  - name: nj-ordering-provider-street2
    condition: 'Bundle.entry.resource.ofType(Practitioner).address.line.exists().not() and Bundle.entry.resource.ofType(Organization).address.line[1].exists()'
    value: ['Bundle.entry.resource.ofType(Organization).address.line[1]']
    hl7Spec: [/PATIENT_RESULT/ORDER_OBSERVATION/ORC-24-2]

  # ORC 24.3
  - name: nj-ordering-provider-city
    condition: 'Bundle.entry.resource.ofType(Practitioner).address.city.exists().not()'
    value: ['Bundle.entry.resource.ofType(Organization).address.city']
    hl7Spec: [/PATIENT_RESULT/ORDER_OBSERVATION/ORC-24-3]

  # ORC 24.4
  - name: nj-ordering-provider-state
    condition: 'Bundle.entry.resource.ofType(Practitioner).address.state.exists().not()'
    value: ['Bundle.entry.resource.ofType(Organization).address.state']
    hl7Spec: [/PATIENT_RESULT/ORDER_OBSERVATION/ORC-24-4]

  # ORC 24.5
  - name: nj-ordering-provider-zip
    condition: 'Bundle.entry.resource.ofType(Practitioner).address.postalCode.exists().not()'
    value: ['Bundle.entry.resource.ofType(Organization).address.postalCode']
    hl7Spec: [/PATIENT_RESULT/ORDER_OBSERVATION/ORC-24-5]