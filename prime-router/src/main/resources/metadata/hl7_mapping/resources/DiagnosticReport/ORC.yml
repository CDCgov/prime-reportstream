# possible '%resource's:
# Bundle.entry.resource.ofType(DiagnosticReport).where(subject.resolve().id = Bundle.entry.resource.ofType(Patient).id)
constants:
  hl7Order: /PATIENT_RESULT(%{patientIndex})/ORDER_OBSERVATION(%{orderIndex})/ORC

elements:
  - name: order-control-reason
    resource: '%resource.extension(%`ext-event-statusReason`).value'
    schema: classpath:/metadata/hl7_mapping/datatypes/codeableConcept/CWE.yml
    constants:
      cweField: '%{hl7Order}-16'