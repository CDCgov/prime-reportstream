constants:
  hl7PIDField: '%{hl7SegmentGroup}/PID'

elements:
  - name: patient-sex
    resource: '%resource.extension.where(url = "pid-8-administrative-sex").value'
    constants:
      cweField: '%{hl7PIDField}-8'
    schema: classpath:/metadata/hl7_mapping/datatypes/codeableConcept/CWE.yml

  - name: patient-account-number
    resource: '%resource.extension.where(url = "pid-18-patient-account-number").value'
    constants:
      cxField: '%{hl7PIDField}-18(%{cxIndex})'
    schema: classpath:/metadata/hl7_mapping/datatypes/identifier/CX.yml
    resourceIndex: cxIndex

  - name: multiple-birth-indicator
    hl7Spec: [ '%{hl7PIDField}-24' ]
    value: [ '%resource.extension.where(url = "pid-24-multiple-birth-indicator").value' ]

  - name: multiple-birth-indicator
    hl7Spec: [ '%{hl7PIDField}-30' ]
    value: [ '%resource.extension.where(url = "pid-30-patient-death-indicator").value',
    ]

  - name: identity-reliability-code
    resource: '%resource.extension.where(url = "pid-32-identity-reliability-code").value'
    resourceIndex: cweIndex
    constants:
      cweField: '%{hl7PIDField}-32(%{cweIndex})'
    schema: classpath:/metadata/hl7_mapping/datatypes/codeableConcept/CWE.yml

  - name: production-class-code
    resource: '%resource.extension.where(url = "pid-38-production-class-code").value'
    resourceIndex: cweIndex
    constants:
      cweField: '%{hl7PIDField}-38(%{cweIndex})'
    schema: classpath:/metadata/hl7_mapping/datatypes/codeableConcept/CWE.yml