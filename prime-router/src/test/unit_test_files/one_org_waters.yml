---
name: waters
description: Test Sender from Waters
jurisdiction: FEDERAL
stateCode: CA
senders:
  - name: default
    organizationName: waters
    topic: covid-19
    customerStatus: active
    schemaName: waters/waters-covid-19
    format: CSV
receivers:
  - name: "giang"
    organizationName: "waters"
    topic: "covid-19"
    customerStatus: active
    translation:
      schemaName: "waters/waters-covid-19"
      format: "CSV"
      defaults: { }
      nameFormat: "STANDARD"
      receivingOrganization: null
      type: CUSTOM
    jurisdictionalFilter:
      - "hasAtLeastOneOf(waters_submitter, sender_id)"
      - "orEquals(patient_state, GH, ordering_facility_state, GH)"
    qualityFilter:
      - "allowAll()"
    reverseTheQualityFilter: false
    deidentify: true
    timing:
      operation: "MERGE"
      numberPerDay: 1440
      initialTime: "00:00"
      timeZone: "EASTERN"
      maxReportCount: 10000
    description: ""
    transport:
      type: SFTP
      host: sftp
      port: 22
      filePath: ./upload
      credentialName: DEFAULT-SFTP
    externalName: null
  - name: "giang2"
    organizationName: "waters"
    topic: "covid-19"
    customerStatus: active
    translation:
      schemaName: "waters/waters-covid-19"
      format: "CSV"
      defaults: { }
      nameFormat: "STANDARD"
      receivingOrganization: null
      type: CUSTOM
    jurisdictionalFilter:
      - "hasAtLeastOneOf(waters_submitter, sender_id)"
      - "orEquals(patient_state, GH, ordering_facility_state, GH)"
    qualityFilter:
      - "allowAll()"
    reverseTheQualityFilter: false
    deidentify: true
    timing:
      operation: "MERGE"
      numberPerDay: 1440
      initialTime: "00:00"
      timeZone: "EASTERN"
      maxReportCount: 10000
    description: ""
    transport:
      storageName: "PartnerStorage"
      containerName: "hhsprotect"
      type: "BLOBSTORE"
    externalName: null
    conditionFilter:
      # Accept all conditions except Covid results in the LIVD look up table
      # Covid flows through the Covid pipeline
      - "%resource.livdTableLookup('Component').contains('coronavirus').not()"
