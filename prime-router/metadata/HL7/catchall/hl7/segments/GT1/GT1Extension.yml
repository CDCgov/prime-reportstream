# $schema: ./../../../../../json_schema/fhir/hl7-to-fhir-mapping-resource-template.json

url:
  type: SYSTEM_URL
  value: gt1-account

# GT1.13 and GT1.14 are mapped in Account.yml
# GT1.15 is mapped to datatype STRING as opposed to NM so that we pass any value given to us by the sender
# GT1.22 is mapped to datatype STRING as opposed to ID to follow HL7 guidance "The value of such a field follows the formatting rules for an ST field except that it is drawn from a table of legal values."
# GT1.25 is mapped to datatype STRING as opposed to ID to follow HL7 guidance "The value of such a field follows the formatting rules for an ST field except that it is drawn from a table of legal values."
# GT1.28 is mapped to datatype STRING as opposed to NM so that we pass any value given to us by the sender

extension:
  expressionType: nested
  generateList: true
  expressions:
    - expressionType: nested
      specs: GT1.2 *
      condition: $gt12 NOT_NULL
      generateList: true
      vars:
        gt12: STRING_ALL, GT1.2
      expressionsMap:
        url:
          type: STRING
          value: GT1.2
        valueIdentifier:
          valueOf: datatypes/CX/Identifier
          expressionType: resource
    - expressionType: nested
      vars:
        gt13: STRING_ALL, GT1.3
      condition: $gt13 NOT_NULL
      specs: GT1.3 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.3
        valueHumanName:
          expressionType: resource
          valueOf: datatypes/XPN/HumanName
    - expressionType: nested
      vars:
        gt14: STRING_ALL, GT1.4
      condition: $gt14 NOT_NULL
      specs: GT1.4 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.4
        valueHumanName:
          expressionType: resource
          valueOf: datatypes/XPN/HumanName
    - expressionType: nested
      vars:
        gt15: STRING_ALL, GT1.5
      condition: $gt15 NOT_NULL
      specs: GT1.5 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.5
        valueAddress:
          expressionType: resource
          valueOf: datatypes/XAD/Address
    - expressionType: nested
      vars:
        gt16: STRING_ALL, GT1.6
      condition: $gt16 NOT_NULL
      specs: GT1.6 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.6
        valueContactPoint:
          expressionType: resource
          valueOf: datatypes/XTN/ContactPoint
    - expressionType: nested
      vars:
        gt17: STRING_ALL, GT1.7
      condition: $gt17 NOT_NULL
      specs: GT1.7 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.7
        valueContactPoint:
          expressionType: resource
          valueOf: datatypes/XTN/ContactPoint
    - expressionType: nested
      vars:
        gt18: GT1.8
      condition: $gt18 NOT_NULL
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.8
        valueDateTime:
          expressionType: nested
          expressions:
            - type: STRING
              valueOf: "GeneralUtils.dateTimeWithZoneId(gt18,ZONEID)"
              expressionType: JEXL
        _valueDateTime:
          expressionType: nested
          expressionsMap:
            extension:
              generateList: true
              expressionType: nested
              expressionsMap:
                url:
                  type: SYSTEM_URL
                  value: hl7v2-date-time
                valueString:
                  type: STRING
                  valueOf: GT1.8
                  expressionType: HL7Spec
    - expressionType: nested
      specs: GT1.9
      condition: $gt19 NOT_NULL
      generateList: true
      vars:
        gt19: STRING_ALL, GT1.9
      expressionsMap:
        url:
          type: STRING
          value: GT1.9
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      specs: GT1.10
      condition: $gt110 NOT_NULL
      generateList: true
      vars:
        gt110: STRING_ALL, GT1.10
      expressionsMap:
        url:
          type: STRING
          value: GT1.10
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      specs: GT1.11
      condition: $gt111 NOT_NULL
      generateList: true
      vars:
        gt111: STRING_ALL, GT1.11
      expressionsMap:
        url:
          type: STRING
          value: GT1.11
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      vars:
        gt112: STRING_ALL, GT1.12
      condition: $gt112 NOT_NULL
      specs: GT1.12
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.12
        valueString:
          type: STRING
          valueOf: GT1.12
          expressionType: HL7Spec
    - expressionType: nested
      vars:
        gt115: GT1.15
      condition: $gt115 NOT_NULL
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.15
        valueString:
          type: STRING
          valueOf: GT1.15
          expressionType: HL7Spec
    - expressionType: nested
      vars:
        gt116: STRING_ALL, GT1.16
      condition: $gt116 NOT_NULL
      specs: GT1.16 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.16
        valueHumanName:
          expressionType: resource
          valueOf: datatypes/XPN/HumanName
    - expressionType: nested
      vars:
        gt117: STRING_ALL, GT1.17
      condition: $gt117 NOT_NULL
      specs: GT1.17 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.17
        valueAddress:
          expressionType: resource
          valueOf: datatypes/XAD/Address
    - expressionType: nested
      vars:
        gt118: STRING_ALL, GT1.18
      condition: $gt118 NOT_NULL
      specs: GT1.18 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.18
        valueContactPoint:
          expressionType: resource
          valueOf: datatypes/XTN/ContactPoint
    - expressionType: nested
      specs: GT1.19 *
      condition: $gt119 NOT_NULL
      generateList: true
      vars:
        gt119: STRING_ALL, GT1.19
      expressionsMap:
        url:
          type: STRING
          value: GT1.19
        valueIdentifier:
          valueOf: datatypes/CX/Identifier
          expressionType: resource
    - expressionType: nested
      specs: GT1.20
      condition: $gt120 NOT_NULL
      generateList: true
      vars:
        gt120: STRING_ALL, GT1.20
      expressionsMap:
        url:
          type: STRING
          value: GT1.20
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      vars:
        gt121: STRING_ALL, GT1.21
      condition: $gt121 NOT_NULL
      specs: GT1.21 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.21
        valueReference:
          valueOf: datatypes/XON/Organization
          expressionType: reference
    - expressionType: nested
      vars:
        gt122: STRING_ALL, GT1.22
      condition: $gt122 NOT_NULL
      specs: GT1.22
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.22
        valueString:
          type: STRING
          valueOf: GT1.22
          expressionType: HL7Spec
    - expressionType: nested
      specs: GT1.23
      condition: $gt123 NOT_NULL
      generateList: true
      vars:
        gt123: STRING_ALL, GT1.23
      expressionsMap:
        url:
          type: STRING
          value: GT1.23
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      vars:
        gt124: GT1.24
      condition: $gt124 NOT_NULL
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.24
        valueDateTime:
          expressionType: nested
          expressions:
            - type: STRING
              valueOf: "GeneralUtils.dateTimeWithZoneId(gt124,ZONEID)"
              expressionType: JEXL
        _valueDateTime:
          expressionType: nested
          expressionsMap:
            extension:
              generateList: true
              expressionType: nested
              expressionsMap:
                url:
                  type: SYSTEM_URL
                  value: hl7v2-date-time
                valueString:
                  type: STRING
                  valueOf: GT1.24
                  expressionType: HL7Spec
    - expressionType: nested
      vars:
        gt125: STRING_ALL, GT1.25
      condition: $gt125 NOT_NULL
      specs: GT1.25
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.25
        valueString:
          type: STRING
          valueOf: GT1.25
          expressionType: HL7Spec
    - expressionType: nested
      specs: GT1.26
      condition: $gt126 NOT_NULL
      generateList: true
      vars:
        gt126: STRING_ALL, GT1.26
      expressionsMap:
        url:
          type: STRING
          value: GT1.26
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: resource
      vars:
        gt127: STRING, GT1.27
      condition: $gt127 NOT_NULL
      valueOf: datatypes/CP/CPExtension
      constants:
        cpExtensionName: GT1.27
      specs: GT1.27
    - expressionType: nested
      vars:
        gt128: GT1.28
      condition: $gt128 NOT_NULL
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.28
        valueString:
          type: STRING
          valueOf: GT1.28
          expressionType: HL7Spec
    - expressionType: nested
      specs: GT1.29 *
      condition: $gt129 NOT_NULL
      generateList: true
      vars:
        gt129: STRING_ALL, GT1.29
      expressionsMap:
        url:
          type: STRING
          value: GT1.29
        valueIdentifier:
          valueOf: datatypes/CX/Identifier
          expressionType: resource
    - expressionType: nested
      specs: GT1.30
      condition: $gt130 NOT_NULL
      generateList: true
      vars:
        gt130: STRING_ALL, GT1.30
      expressionsMap:
        url:
          type: STRING
          value: GT1.30
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: "https://reportstream.cdc.gov/fhir/StructureDefinition/hl7v2-date"
        period:
          valueOf: datatypes/DT/Period
          expressionType: resource
          vars:
            start: GT1.31
            end: GT1.32
    - expressionType: nested
      specs: GT1.33
      condition: $gt133 NOT_NULL
      generateList: true
      vars:
        gt133: STRING_ALL, GT1.33
      expressionsMap:
        url:
          type: STRING
          value: GT1.33
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      specs: GT1.34 *
      condition: $gt134 NOT_NULL
      generateList: true
      vars:
        gt134: STRING_ALL, GT1.34
      expressionsMap:
        url:
          type: STRING
          value: GT1.34
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      specs: GT1.35 *
      condition: $gt135 NOT_NULL
      generateList: true
      vars:
        gt135: STRING_ALL, GT1.35
      expressionsMap:
        url:
          type: STRING
          value: GT1.35
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      specs: GT1.36
      condition: $gt136 NOT_NULL
      generateList: true
      vars:
        gt136: STRING_ALL, GT1.36
      expressionsMap:
        url:
          type: STRING
          value: GT1.36
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      specs: GT1.37
      condition: $gt137 NOT_NULL
      generateList: true
      vars:
        gt137: STRING_ALL, GT1.37
      expressionsMap:
        url:
          type: STRING
          value: GT1.37
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      specs: GT1.38
      condition: $gt138 NOT_NULL
      generateList: true
      vars:
        gt138: STRING_ALL, GT1.38
      expressionsMap:
        url:
          type: STRING
          value: GT1.38
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      vars:
        gt139: STRING_ALL, GT1.39
      condition: $gt139 NOT_NULL
      specs: GT1.39
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.39
        valueString:
          type: STRING
          valueOf: GT1.39
          expressionType: HL7Spec
    - expressionType: nested
      specs: GT1.40
      condition: $gt140 NOT_NULL
      generateList: true
      vars:
        gt140: STRING_ALL, GT1.40
      expressionsMap:
        url:
          type: STRING
          value: GT1.40
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      specs: GT1.41
      condition: $gt41 NOT_NULL
      generateList: true
      vars:
        gt141: STRING_ALL, GT1.41
      expressionsMap:
        url:
          type: STRING
          value: GT1.41
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      vars:
        gt142: STRING_ALL, GT1.42
      condition: $gt142 NOT_NULL
      specs: GT1.42 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.42
        valueHumanName:
          expressionType: resource
          valueOf: datatypes/XPN/HumanName
    - expressionType: nested
      specs: GT1.43
      condition: $gt143 NOT_NULL
      generateList: true
      vars:
        gt143: STRING_ALL, GT1.43
      expressionsMap:
        url:
          type: STRING
          value: GT1.43
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      specs: GT1.44 *
      condition: $gt144 NOT_NULL
      generateList: true
      vars:
        gt144: STRING_ALL, GT1.44
      expressionsMap:
        url:
          type: STRING
          value: GT1.44
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      vars:
        gt145: STRING_ALL, GT1.45
      condition: $gt145 NOT_NULL
      specs: GT1.45 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.45
        valueHumanName:
          expressionType: resource
          valueOf: datatypes/XPN/HumanName
    - expressionType: nested
      vars:
        gt146: STRING_ALL, GT1.46
      condition: $gt146 NOT_NULL
      specs: GT1.46 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.46
        valueContactPoint:
          expressionType: resource
          valueOf: datatypes/XTN/ContactPoint
    - expressionType: nested
      specs: GT1.47
      condition: $gt147 NOT_NULL
      generateList: true
      vars:
        gt147: STRING_ALL, GT1.47
      expressionsMap:
        url:
          type: STRING
          value: GT1.47
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      specs: GT1.48
      condition: $gt148 NOT_NULL
      generateList: true
      vars:
        gt148: STRING_ALL, GT1.48
      expressionsMap:
        url:
          type: STRING
          value: GT1.48
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      vars:
        gt149: STRING_ALL, GT1.49
      condition: $gt149 NOT_NULL
      specs: GT1.49
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.49
        valueString:
          type: STRING
          valueOf: GT1.49
          expressionType: HL7Spec
    #### Need to determine how we will do this
    #- expressionType: nested
    #  specs: GT1.50
    #  condition: $gt150 NOT_NULL
    #  generateList: true
    #  vars:
    #    gt150: STRING_ALL, GT1.50
    #  expressionsMap:
    #    url:
    #      type: STRING
    #      value: GT1.50
    #    extension:
    #      valueOf: datatypes/JCC/ExtensionJobCodeClass
    #      expressionType: resource
    - expressionType: nested
      vars:
        gt151: STRING_ALL, GT1.51
      condition: $gt151 NOT_NULL
      specs: GT1.51 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.51
        valueReference:
          valueOf: datatypes/XON/Organization
          expressionType: reference
    - expressionType: nested
      specs: GT1.52
      condition: $gt152 NOT_NULL
      generateList: true
      vars:
        gt152: STRING_ALL, GT1.52
      expressionsMap:
        url:
          type: STRING
          value: GT1.52
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      specs: GT1.53
      condition: $gt153 NOT_NULL
      generateList: true
      vars:
        gt153: STRING_ALL, GT1.53
      expressionsMap:
        url:
          type: STRING
          value: GT1.53
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    #### Need to determine how we will do this
    #- expressionType: nested
    #  specs: GT1.54
    #  condition: $gt154 NOT_NULL
    #  generateList: true
    #  vars:
    #    gt154: STRING_ALL, GT1.54
    #  expressionsMap:
    #    url:
    #      type: STRING
    #      value: GT1.54
    #    extension:
    #      valueOf: datatypes/FE/ExtensionFinancialClss
    #      expressionType: resource
    - expressionType: nested
      specs: GT1.55
      condition: $gt155 NOT_NULL
      generateList: true
      vars:
        gt155: STRING_ALL, GT1.55
      expressionsMap:
        url:
          type: STRING
          value: GT1.55
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      vars:
        gt156: STRING_ALL, GT1.56
      condition: $gt156 NOT_NULL
      specs: GT1.56
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.56
        valueString:
          type: STRING
          valueOf: GT1.56
          expressionType: HL7Spec
    - expressionType: nested
      specs: GT1.57
      condition: $gt157 NOT_NULL
      generateList: true
      vars:
        gt157: STRING_ALL, GT1.57
      expressionsMap:
        url:
          type: STRING
          value: GT1.57
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource