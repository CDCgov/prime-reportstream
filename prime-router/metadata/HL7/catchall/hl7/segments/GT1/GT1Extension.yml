# $schema: ./../../../../../json_schema/fhir/hl7-to-fhir-mapping-resource-template.json

url:
  type: SYSTEM_URL
  value: gt1-account

# GT1.13 and GT1.14 are mapped in Account.yml
# GT1.15 is mapped to datatype STRING as opposed to NM so that we pass any value given to us by the sender
# GT1.22 is mapped to datatype STRING as opposed to ID to follow HL7 guidance "The value of such a field follows the formatting rules for an ST field except that it is drawn from a table of legal values."
# GT1.25 is mapped to datatype STRING as opposed to ID to follow HL7 guidance "The value of such a field follows the formatting rules for an ST field except that it is drawn from a table of legal values."
# GT1.28 is mapped to datatype STRING as opposed to NM so that we pass any value given to us by the sender

extension:
  expressionType: nested
  generateList: true
  expressions:
    - expressionType: nested
      specs: GT1.2 *
      condition: $gt12 NOT_NULL
      generateList: true
      vars:
        gt12: STRING_ALL, GT1.2
      expressionsMap:
        url:
          type: STRING
          value: GT1.2
        valueIdentifier:
          valueOf: datatypes/CX/Identifier
          expressionType: resource
    - expressionType: nested
      vars:
        gt13: STRING_ALL, GT1.3
      condition: $gt13 NOT_NULL
      specs: GT1.3 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.3
        valueHumanName:
          expressionType: resource
          valueOf: datatypes/XPN/HumanName
    - expressionType: nested
      vars:
        gt14: STRING_ALL, GT1.4
      condition: $gt14 NOT_NULL
      specs: GT1.4 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.4
        valueHumanName:
          expressionType: resource
          valueOf: datatypes/XPN/HumanName
    - expressionType: nested
      vars:
        GT15: STRING_ALL, GT1.5
      condition: $gt15 NOT_NULL
      specs: GT1.5 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.5
        valueAddress:
          expressionType: resource
          valueOf: datatypes/XAD/Address
    - expressionType: nested
      vars:
        gt16: STRING_ALL, GT1.6
      condition: $gt16 NOT_NULL
      specs: GT1.6 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.6
        valueContactPoint:
          expressionType: resource
          valueOf: datatypes/XTN/ContactPoint
    - expressionType: nested
      vars:
        gt17: STRING_ALL, GT1.7
      condition: $gt17 NOT_NULL
      specs: GT1.7 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.7
        valueContactPoint:
          expressionType: resource
          valueOf: datatypes/XTN/ContactPoint
    - expressionType: nested
      vars:
        gt18: GT1.8
      condition: $gt18 NOT_NULL
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.8
        valueDateTime:
          expressionType: nested
          expressions:
            - type: STRING
              valueOf: "GeneralUtils.dateTimeWithZoneId(gt18,ZONEID)"
              expressionType: JEXL
        _valueDateTime:
          expressionType: nested
          expressionsMap:
            extension:
              generateList: true
              expressionType: nested
              expressionsMap:
                url:
                  type: SYSTEM_URL
                  value: hl7v2-date-time
                valueString:
                  type: STRING
                  valueOf: GT1.8
                  expressionType: HL7Spec
    - expressionType: nested
      specs: GT1.9
      condition: $gt19 NOT_NULL
      generateList: true
      vars:
        gt19: STRING_ALL, GT1.9
      expressionsMap:
        url:
          type: STRING
          value: GT1.9
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      specs: GT1.10
      condition: $gt110 NOT_NULL
      generateList: true
      vars:
        gt110: STRING_ALL, GT1.10
      expressionsMap:
        url:
          type: STRING
          value: GT1.10
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      specs: GT1.11
      condition: $gt111 NOT_NULL
      generateList: true
      vars:
        gt111: STRING_ALL, GT1.11
      expressionsMap:
        url:
          type: STRING
          value: GT1.11
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      vars:
        gt112: STRING_ALL, GT1.12
      condition: $gt112 NOT_NULL
      specs: GT1.12
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.12
        valueString:
          type: STRING
          valueOf: GT1.12
          expressionType: HL7Spec
    - expressionType: nested
      vars:
        gt115: GT1.15
      condition: $gt115 NOT_NULL
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.15
        valueString:
          type: STRING
          valueOf: GT1.15
    - expressionType: nested
      vars:
        gt116: STRING_ALL, GT1.16
      condition: $gt116 NOT_NULL
      specs: GT1.16 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.16
        valueHumanName:
          expressionType: resource
          valueOf: datatypes/XPN/HumanName
    - expressionType: nested
      vars:
        gt117: STRING_ALL, GT1.17
      condition: $gt117 NOT_NULL
      specs: GT1.17 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.17
        valueAddress:
          expressionType: resource
          valueOf: datatypes/XAD/Address
    - expressionType: nested
      vars:
        gt118: STRING_ALL, GT1.18
      condition: $gt118 NOT_NULL
      specs: GT1.18 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.18
        valueContactPoint:
          expressionType: resource
          valueOf: datatypes/XTN/ContactPoint
    - expressionType: nested
      specs: GT1.19 *
      condition: $gt119 NOT_NULL
      generateList: true
      vars:
        gt119: STRING_ALL, GT1.19
      expressionsMap:
        url:
          type: STRING
          value: GT1.19
        valueIdentifier:
          valueOf: datatypes/CX/Identifier
          expressionType: resource
    - expressionType: nested
      specs: GT1.20
      condition: $gt120 NOT_NULL
      generateList: true
      vars:
        gt120: STRING_ALL, GT1.20
      expressionsMap:
        url:
          type: STRING
          value: GT1.20
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
    - expressionType: nested
      vars:
        in121: STRING_ALL, GT1.21
      condition: $gt121 NOT_NULL
      specs: GT1.21 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.21
        valueReference:
          valueOf: datatypes/XON/Organization
          expressionType: reference
    - expressionType: nested
      vars:
        gt122: STRING_ALL, GT1.22
      condition: $gt122 NOT_NULL
      specs: GT1.22
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.22
        valueString:
          type: STRING
          valueOf: GT1.22
          expressionType: HL7Spec
    - expressionType: nested
      specs: GT1.23
      condition: $gt123 NOT_NULL
      generateList: true
      vars:
        gt123: STRING_ALL, GT1.23
      expressionsMap:
        url:
          type: STRING
          value: GT1.23
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
    - expressionType: nested
      vars:
        gt124: GT1.24
      condition: $gt124 NOT_NULL
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.24
        valueDateTime:
          expressionType: nested
          expressions:
            - type: STRING
              valueOf: "GeneralUtils.dateTimeWithZoneId(gt124,ZONEID)"
              expressionType: JEXL
        _valueDateTime:
          expressionType: nested
          expressionsMap:
            extension:
              generateList: true
              expressionType: nested
              expressionsMap:
                url:
                  type: SYSTEM_URL
                  value: hl7v2-date-time
                valueString:
                  type: STRING
                  valueOf: GT1.24
                  expressionType: HL7Spec
    - expressionType: nested
      vars:
        gt125: STRING_ALL, GT1.25
      condition: $gt125 NOT_NULL
      specs: GT1.25
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.25
        valueString:
          type: STRING
          valueOf: GT1.25
          expressionType: HL7Spec
    - expressionType: nested
      specs: GT1.26
      condition: $gt126 NOT_NULL
      generateList: true
      vars:
        gt126: STRING_ALL, GT1.26
      expressionsMap:
        url:
          type: STRING
          value: GT1.26
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
    - expressionType: resource
      vars:
        in127: STRING, GT1.27
      condition: $gt127 NOT_NULL
      valueOf: datatypes/CP/CPExtension
      constants:
        cpExtensionName: GT1.27
      specs: GT1.27
    - expressionType: nested
      vars:
        gt128: GT1.28
      condition: $gt128 NOT_NULL
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: GT1.28
        valueString:
          type: STRING
          valueOf: GT1.28
    - expressionType: nested
      specs: GT1.29 *
      condition: $gt129 NOT_NULL
      generateList: true
      vars:
        gt129: STRING_ALL, GT1.29
      expressionsMap:
        url:
          type: STRING
          value: GT1.29
        valueIdentifier:
          valueOf: datatypes/CX/Identifier
          expressionType: resource
    - expressionType: nested
      specs: GT1.30
      condition: $gt130 NOT_NULL
      generateList: true
      vars:
        gt130: STRING_ALL, GT1.30
      expressionsMap:
        url:
          type: STRING
          value: GT1.30
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource