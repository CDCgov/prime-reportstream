# $schema: ./../../../../../json_schema/fhir/hl7-to-fhir-mapping-resource-template.json

resourceType: Account

# There are no official mappings for GT1 -> Account for FHIR R4. Guidance can be found from the V2-FHIR mapping confluence page at https://confluence.hl7.org/pages/viewpage.action?pageId=49644444
# All fields are mapped to GT1Extension unless otherwise noted so that we can guarantee the input and output values match
# GT1.13 and GT1.14 are mapped to guarantor.period.start and guarantor.period.end as this is unambiguous and unlikely to change

id:
  type: STRING
  valueOf: "GeneralUtils.generateResourceId()"
  expressionType: JEXL

guarantor:
  expressionType: nested
  generateList: true
  expressionsMap:
    period:
      valueOf: datatypes/DT/Period
      expressionType: resource
      vars:
        start: GT1.13
        end: GT1.14

extension:
  generateList: true
  expressionType: nested
  expressions:
    - expressionType: resource
      valueOf: segments/GT1/GT1Extension
