# $schema: ./../../../../../json_schema/fhir/hl7-to-fhir-mapping-resource-template.json

url:
  type: SYSTEM_URL
  value: prt-extension

extension:
  generateList: true
  expressionType: nested
  expressions:
    - expressionType: nested
      vars:
        prt1: STRING_ALL, PRT.1
      condition: $prt1 NOT_NULL
      expressionsMap:
        url:
          value: PRT.1
          type: STRING
        valueIdentifier:
          valueOf: datatypes/EI/Identifier
          specs: PRT.1
          type: resource
    - expressionType: nested
      vars:
        prt2: STRING_ALL, PRT.2
      condition: $prt2 NOT_NULL
      expressionsMap:
        url:
          value: PRT.2
          type: STRING
        valueId:
          type: STRING
          expressionType: HL7Spec
          valueOf: PRT.2
    - expressionType: nested
      vars:
        prt3: STRING_ALL, PRT.3
      condition: $prt3 NOT_NULL
      expressionsMap:
        url:
          value: PRT.3
          type: STRING
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          specs: PRT.3
          expressionType: resource
    - expressionType: nested
      vars:
        prt3: STRING_ALL, PRT.4
      condition: $prt4 NOT_NULL
      expressionsMap:
        url:
          value: PRT.4
          type: STRING
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          specs: PRT.4
          expressionType: resource