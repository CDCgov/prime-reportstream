url:
  type: SYSTEM_URL
  value: pid-patient
  condition: $pid18 NOT_NULL
  vars:
    pid18: STRING_ALL, PID.18

extension:
  expressionType: nested
  generateList: true
  expressions:
    - expressionType: nested
      specs: PID.18
      condition: $pid18 NOT_NULL
      generateList: true
      vars:
        pid18: STRING_ALL, PID.18
      expressionsMap:
        url:
          type: STRING
          value: pid-18-patient-account-number
        valueIdentifier:
          valueOf: datatypes/CX/Identifier
          expressionType: resource
          constants:
            identifierIndexName: patient-account-number
    - expressionType: nested
      condition: $pid24 NOT_NULL
      vars:
        pid24: STRING_ALL, PID.24
      expressionsMap:
        url:
          type: STRING
          value: pid-24-multiple-birth-indicator
        valueString:
          type: STRING
          valueOf: PID.24
          expressionType: HL7Spec
    - expressionType: nested
      condition: $pid30 NOT_NULL
      vars:
        pid30: STRING_ALL, PID.30
      expressionsMap:
        url:
          type: STRING
          value: pid-30-patient-death-indicator
        valueString:
          type: STRING
          valueOf: PID.30
          expressionType: HL7Spec
    - expressionType: nested
      specs: PID.32
      condition: $pid32 NOT_NULL
      vars:
        pid32: STRING_ALL, PID.32
      expressionsMap:
        url:
          type: STRING
          value: pid-32-identity-reliability-code
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
    - expressionType: nested
      specs: PID.38 *
      condition: $pid38 NOT_NULL
      vars:
        pid38: STRING_ALL, PID.38
      expressionsMap:
        url:
          type: STRING
          value: pid-38-production-class-code
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource