resourceType: Provenance
id:
  type: STRING
  valueOf: "GeneralUtils.generateResourceId()"
  expressionType: JEXL

target:
  valueOf: datatype/Reference
  generateList: true
  expressionType: resource
  specs: $Bundle

activity:
  expressionType: nested
  expressionsMap:
    coding:
      expressionType: nested
      expressionsMap:
        code:
          type: STRING
          valueOf: "v2-FHIR transformation"

recorded:
  type: STRING
  valueOf: "GeneralUtils.getCurrentDateTimeUsingZoneId(ZONEID)"
  expressionType: JEXL

policy:
  type: SYSTEM_URL
  valueOf: "v2-to-fhir-inventory" #TODO: fill with /uri of the policy governing transformation of the v2 to FHIR/

agent:
  expressionType: nested
  generateList: true
  expressionsMap:
    type:
      expressionType: nested
      expressionsMap:
        coding:
          expressionType: nested
          expressionsMap:
            code:
              type: STRING
              valueOf: "assembler"
            system:
              type: SYSTEM_URL
              valueOf: "http://terminology.hl7.org/CodeSystem/provenance-participant-type"
#    who: #TODO: populate this with /the organization owning or device performing the transformation by the mapping tool/
#      valueOf: datatypes/HD/Organization
#      expressionType: reference
#      specs: ???

entity:
  expressionType: nested
  expressionsMap:
    role:
      type: STRING
      valueOf: "source"
