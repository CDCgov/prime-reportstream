resourceType: Provenance
id:
  type: STRING
  valueOf: "GeneralUtils.generateResourceId()"
  expressionType: JEXL

target:
  valueOf: datatype/Reference
  generateList: true
  expressionType: resource
  specs: $Bundle

activity:
  expressionType: nested
  expressionsMap:
    coding:
      expressionType: nested
      expressionsMap:
        code:
          type: STRING
          valueOf: "v2-FHIR transformation"

recorded:
  type: STRING
  valueOf: "GeneralUtils.getCurrentDateTimeUsingZoneId(ZONEID)"
  expressionType: JEXL

policy:
  type: SYSTEM_URL
  valueOf: "http://hl7.org/fhir/uv/v2mappings/message-oru-r01-to-bundle"

agent:
  expressionType: nested
  generateList: true
  expressionsMap:
    type:
      expressionType: nested
      expressionsMap:
        coding:
          expressionType: nested
          expressionsMap:
            code:
              type: STRING
              valueOf: "assembler"
            system:
              type: SYSTEM_URL
              valueOf: "http://terminology.hl7.org/CodeSystem/provenance-participant-type"
    who:
      valueOf: segments/MSH/datatypes/HD/ReportStreamOrganization
      expressionType: reference

entity:
  expressionType: nested
  expressionsMap:
    role:
      type: STRING
      valueOf: "source"
