url:
  type: SYSTEM_URL
  value: pv2-encounter

extension:
  expressionType: nested
  generateList: true
  expressions:
    - vars:
        pv215: STRING_ALL, PV2.15
      condition: $pv215 NOT_NULL
      expressionType: nested
      expressionsMap:
        url:
          type: STRING
          value: pv2-15-employment-illness-related-indicator
        valueString:
          type: STRING
          expressionType: HL7Spec
          valueOf: PV2.15
    - vars:
        pv223: STRING_ALL, PV2.23
      condition: $pv223 NOT_NULL
      expressionType: nested
      specs: PV2.23 *
      generateList: true
      expressionsMap:
        url:
          type: STRING
          value: pv2-23-clinic-organization-name
        valueReference:
          expressionType: reference
          valueOf: datatypes/XON/Organization
    - vars:
        pv226: STRING_ALL, PV2.26
      condition: $pv226 NOT_NULL
      expressionType: nested
      expressionsMap:
        url:
          type: STRING
          value: pv2-26-previous-treatment-date
        valueString:
          type: STRING
          expressionType: HL7Spec
          valueOf: PV2.26
    - vars:
        pv229: STRING_ALL, PV2.29
      condition: $pv229 NOT_NULL
      expressionType: nested
      expressionsMap:
        url:
          type: STRING
          value: pv2-29-first-similar-date
        valueString:
          type: STRING
          expressionType: HL7Spec
          valueOf: PV2.29