resourceType: Organization

id:
  type: STRING
  valueOf: "GeneralUtils.generateResourceId()"
  expressionType: JEXL

identifier_1:
  valueOf: datatype/Identifier_var
  expressionType: resource
  generateList: true
  vars:
    valueIn: HD.1
  constants:
    isNamespaceId: "true"

identifier_2:
  condition: $hd3 EQUALS ISO || $hd3 EQUALS UUID
  valueOf: datatype/Identifier_var
  expressionType: resource
  generateList: true
  vars:
    code: HD.3
    valueIn: HD.2
    hd3: String, HD.3
  constants:
    systemId: "urn:ietf:rfc:3986"
    system: "http://terminology.hl7.org/CodeSystem/v2-0301"
    isUniversalId: "true"

identifier_3:
  condition: $hd3 NOT_EQUALS ISO && $hd3 NOT_EQUALS UUID
  valueOf: datatype/Identifier_var
  expressionType: resource
  generateList: true
  vars:
    code: HD.3
    valueIn: HD.2
    hd3: String, HD.3
  constants:
    system: "http://terminology.hl7.org/CodeSystem/v2-0301"
    isUniversalId: "true"

# This handles the case where HD.3 is not populated
# Ideally this would be handled via identifier_3, but complex conditions are not supported
# ($hd3 NOT_EQUALS ISO && $hd3 NOT_EQUALS UUID) || $hd3 NULL
identifier_4:
  condition: $hd3 NULL
  valueOf: datatype/Identifier_var
  expressionType: resource
  generateList: true
  vars:
    code: HD.3
    valueIn: HD.2
    hd3: String, HD.3
  constants:
    system: "http://terminology.hl7.org/CodeSystem/v2-0301"
    isUniversalId: "true"

address:
  condition: $country NOT_NULL
  valueOf: datatype/Address
  expressionType: resource
  generateList: true