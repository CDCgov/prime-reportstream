value_1:
  condition: $telEquipType NOT_EQUAL Internet && $telEquipType NOT_EQUAL X.400 && $localNum NULL && $unformattedTelNum NULL && $telNum NOT_NULL
  valueOf: XTN.1
  vars:
    telNum: String, XTN.1
    telEquipType: String, XTN.3
    localNum: String, XTN.7
    unformattedTelNum: String, XTN.12

value_2:
  condition: $telEquipType EQUALS Internet || $telEquipType EQUALS X.400
  valueOf: XTN.4
  vars:
    telEquipType: String, XTN.3

value_3:
  condition: $telEquipType NOT_EQUAL Internet && $telEquipType NOT_EQUAL X.400 && $unformattedTelNum NOT_NULL
  valueOf: XTN.12
  vars:
    telEquipType: String, XTN.3
    unformattedTelNum: String, XTN.12

use:
  condition: $telUseCode NOT_NULL
  valueOf: XTN.2
  vars:
    telUseCode: String, XTN.2

system_1:
  condition: $telEquipType NOT_NULL
  valueOf: XTN.3
  vars:
    telEquipType: String, XTN.3

system_2:
  condition: $telEquipType NULL && $commAddress NOT_NULL
  valueOf: "email"
  vars:
    telEquipType: String, XTN.3
    commAddress: String, XTN.4

system_3:
  condition: $telEquipType NULL && $commAddress NOT_NULL
  valueOf: extension/DataTypeReason
  expressionType: resource
  vars:
    telEquipType: String, XTN.3
    commAddress: String, XTN.4
    reason: "unknown"

extension_1-country-code:
  condition: $countryCode NOT_NULL
  generateList: true
  expressionType: nested
  vars:
    countryCode: String, XTN.5
  expressionsMap:
    url:
      type: SYSTEM_URL
      value: "contactpoint-country"
    valueString:
      value: $countryCode

extension_2-area-code:
  condition: $areaCode NOT_NULL
  generateList: true
  expressionType: nested
  vars:
    areaCode: String, XTN.6
  expressionsMap:
    url:
      type: SYSTEM_URL
      value: "contactpoint-area"
    valueString:
      value: $areaCode

extension_3-local-number:
  condition: $telEquipType NOT_EQUAL Internet && $telEquipType NOT_EQUAL X.400 && $localNum NOT_NULL
  generateList: true
  expressionType: nested
  vars:
    telEquipType: String, XTN.3
    localNum: String, XTN.7
  expressionsMap:
    url:
      type: SYSTEM_URL
      value: "contactpoint-local"
    valueString:
      value: $localNum

extension_4-phone-extension:
  condition: $numExt NOT_NULL
  generateList: true
  expressionType: nested
  vars:
    numExt: String, XTN.8
  expressionsMap:
    url:
      type: SYSTEM_URL
      value: "contactpoint-extension"
    valueString:
      value: $numExt

extension_5-any-text:
  condition: $anyText NOT_NULL
  generateList: true
  expressionType: nested
  vars:
    anyText: String, XTN.9
  expressionsMap:
    url:
      type: SYSTEM_URL
      value: "text"
    valueString:
      type: STRING
      valueOf: $anyText

period:
  valueOf: datatype/Period
  expressionType: resource
  vars:
    start: $start
    end: $end