resources:

  - resourceName: MessageHeader
    segment: MSH
    resourcePath: segments/MSH/MessageHeader
    repeats: false
    isReferenced: false

  - resourceName: Patient
    segment: .PID
    group: PATIENT
    resourcePath: segments/PID/Patient
    isReferenced: true
    repeats: false

  - resourceName: ServiceRequest
    segment: .ORC
    group: ORDER
    resourcePath: segments/ORC/ServiceRequest
    repeats: true
    isReferenced: true
    additionalSegments:
      - .OBSERVATION_REQUEST.OBR
      - .OBSERVATION_REQUEST.NTE
      - PATIENT.PATIENT_VISIT.PV1
      - MSH
      - PATIENT.PID

  - resourceName: Observation
    segment: .OBSERVATION_REQUEST.OBSERVATION.OBX
    group: ORDER
    resourcePath: segments/OBX/Observation
    repeats: true
    isReferenced: true
    additionalSegments:
      - .ORC
      - .OBSERVATION_REQUEST.OBR
      - .OBSERVATION_REQUEST.OBSERVATION.NTE
      - MSH

  # TODO Add support for inbound SPM, instead of deriving from OBR; see https://github.com/LinuxForHealth/hl7v2-fhir-converter/blob/66bd89490c083e97d08c2a6229baca4ffed8dfa5/src/main/resources/hl7/message/OML_O21.yml
  - resourceName: Specimen
    segment: .OBR
    group: ORDER.OBSERVATION_REQUEST
    resourcePath: segments/SPM/Specimen
    repeats: true
    isReferenced: true
    additionalSegments:
      - .OBSERVATION.OBX
      - .OBSERVATION.NTE
      - MSH