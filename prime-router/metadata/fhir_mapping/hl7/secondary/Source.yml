name:
  type: STRING
  valueOf: MSH.3
  expressionType: HL7Spec

endpoint:
  type: URL
  valueOf: MSH.24.2
  expressionType: HL7Spec

version:
  type: STRING
  valueOf: SFT.2
  expressionType: HL7Spec

software:
  type: STRING
  valueOf: SFT.3
  expressionType: HL7Spec

# For OIDs
extension_1:
  generateList: true
  valueOf: extension/Extension
  expressionType: resource
  condition: $idStr NOT_NULL && $systemStr EQUALS ISO
  vars:
    idStr: String, MSH.3.2
    value: $oidUrlPrefix + MSH.3.2
    systemStr: String, MSH.3.3
  constants:
    oidUrlPrefix: "urn:oid:"
    KEY_NAME_SUFFIX: Oid
    urlValue: source-identifier-system

# For all other ID types
extension_2:
  generateList: true
  valueOf: extension/Extension
  expressionType: resource
  condition: $idStr NOT_NULL && $systemStr NOT_EQUALS ISO
  vars:
    idStr: String, MSH.3.2
    value: $idUrlPrefix + MSH.3.2
    systemStr: String, MSH.3.3
  constants:
    idUrlPrefix: "urn:id:"
    KEY_NAME_SUFFIX: String
    urlValue: source-identifier-system

extension_3:
  generateList: true
  valueOf: extension/Extension
  expressionType: resource
  vars:
    value: String, SFT.4
  constants:
    KEY_NAME_SUFFIX: String
    urlValue: source-software-binary-id

extension_4:
  generateList: true
  valueOf: extension/Extension
  expressionType: resource
  vars:
    value: String, SFT.5
  constants:
    KEY_NAME_SUFFIX: String
    urlValue: source-software-description

extension_5:
  generateList: true
  valueOf: extension/Extension
  expressionType: resource
  vars:
    value: SFT.6, GeneralUtils.dateTimeWithZoneId(value,ZONEID)
  constants:
    KEY_NAME_SUFFIX: DateTime
    urlValue: source-software-install-date

extension_6:
  generateList: true
  expressionType: nested
  expressionsMap:
    url:
      type: SYSTEM_URL
      value: "source-software-vendor-org"
    valueReference:
      valueOf: resource/Organization
      expressionType: reference
      specs: SFT.1

