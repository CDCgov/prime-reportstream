numerator:
  expressionType: nested
  expressionsMap:
    value:
      type: STRING
      expressionType: HL7Spec
      valueOf: SN.2
    code:
      condition: $identifier NOT_NULL && $nameOfCodingSystem NOT_NULL
      type: STRING
      expressionType: HL7Spec
      valueOf: CWERangeUnits.1
      vars:
        identifier: CWERangeUnits.1
        nameOfCodingSystem: CWERangeUnits.3
    unit:
      expressionType: nested
      condition:
      vars:
        identifier: CWERangeUnits.1
        text: CWERangeUnits.2
      expressions:
        - condition: $text NULL && $identifier NOT_NULL
          type: STRING
          valueOf: CWERangeUnits.1
          expressionType: HL7Spec
        - condition: $text NOT_NULL
          type: STRING
          valueOf: CWERangeUnits.2
          expressionType: HL7Spec
    system:
      condition: $identifier NOT_NULL && $nameOfCodingSystem NOT_NULL
      type: SYSTEM_URL
      expressionType: HL7Spec
      valueOf: CWERangeUnits.1
      vars:
        identifier: CWERangeUnits.1
        nameOfCodingSystem: CWERangeUnits.3
    extension:
      generateList: true
      expressionType: nested
      expressionsMap:
        url:
          type: SYSTEM_URL
          value: 'cwe-quantity'
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
          specs: CWERangeUnits

denominator:
  expressionType: nested
  expressionsMap:
    value:
      type: STRING
      expressionType: HL7Spec
      valueOf: SN.2
    code:
      condition: $identifier NOT_NULL && $nameOfCodingSystem NOT_NULL
      type: STRING
      expressionType: HL7Spec
      valueOf: CWERangeUnits.1
      vars:
        identifier: CWERangeUnits.1
        nameOfCodingSystem: CWERangeUnits.3
    unit:
      expressionType: nested
      condition:
      vars:
        identifier: CWERangeUnits.1
        text: CWERangeUnits.2
      expressions:
        - condition: $text NULL && $identifier NOT_NULL
          type: STRING
          valueOf: CWERangeUnits.1
          expressionType: HL7Spec
        - condition: $text NOT_NULL
          type: STRING
          valueOf: CWERangeUnits.2
          expressionType: HL7Spec
    system:
      condition: $identifier NOT_NULL && $nameOfCodingSystem NOT_NULL
      type: SYSTEM_URL
      expressionType: HL7Spec
      valueOf: CWERangeUnits.1
      vars:
        identifier: CWERangeUnits.1
        nameOfCodingSystem: CWERangeUnits.3
    extension:
      generateList: true
      expressionType: nested
      expressionsMap:
        url:
          type: SYSTEM_URL
          value: 'cwe-quantity'
        valueCodeableConcept:
          valueOf: datatypes/CWE/CodeableConcept
          expressionType: resource
          specs: CWERangeUnits

extension:
  expressionType: nested
  generateList: true
  expressions:
    - vars:
        sn1: STRING, SN.1
      condition: $sn1 NOT_NULL
      expressionType: nested
      expressionsMap:
        url:
          type: SYSTEM_URL
          value: sn-1-comparator
        valueString:
          type: STRING
          expressionType: HL7Spec
          valueOf: SN.1
    - vars:
        sn3: STRING, SN.3
      condition: $sn3 NOT_NULL
      expressionType: nested
      expressionsMap:
        url:
          type: SYSTEM_URL
          value: sn-3-separator
        valueString:
          type: STRING
          expressionType: HL7Spec
          valueOf: SN.3
