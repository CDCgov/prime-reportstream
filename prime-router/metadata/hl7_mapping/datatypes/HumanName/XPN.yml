elements:

  - name: xpn-family-name
    resource: '%resource.family'
    constants:
      hl7fnField: '%{xpnField}-1'
    schema: ./FN

  - name: xpn-given-name
    value: [ '%resource.extension(%`rsext-xpn2-given-name`).value' ]
    hl7Spec: [ '%{xpnField}-2' ]

  - name: xpn-second-given-name
    value: [ '%resource.extension(%`rsext-xpn3-second-given-name`).value' ]
    hl7Spec: [ '%{xpnField}-3' ]

  - name: xpn-suffix
    value: [ '%resource.extension(%`rsext-xpn4-suffix`).value' ]
    hl7Spec: [ '%{xpnField}-4' ]

  - name: xpn-prefix
    value: [ '%resource.prefix' ]
    hl7Spec: [ '%{xpnField}-5' ]

  - name: xpn-degree
    value: [ '%resource.extension(%`rsext-xpn6-degree`).value' ]
    hl7Spec: [ '%{xpnField}-6' ]

  - name: xpn-name-type-code
    value: [ '%resource.extension(%`rsext-xpn7-name-type-code`).value' ]
    hl7Spec: [ '%{xpnField}-7' ]

  - name: xpn-name-type-code-mapped
    condition: '%resource.extension(%`rsext-xpn7-name-type-code`).exists().not()'
    value: [ '%resource.use' ]
    hl7Spec: [ '%{xpnField}-7' ]
    valueSet:
      values:
        official: L
        usual: D
        maiden: M
        nickname: N
        anonymous: S

  - name: xpn-name-representation-code
    value: [ '%resource.extension(%`rsext-xpn8-name-representation-code`).value' ]
    hl7Spec: [ '%{xpnField}-8' ]

  - name: xpn-name-context
    resource: '%resource.extension(%`rsext-xpn9-name-context`).value'
    constants:
      cweField: '%{xpnField}-9'
    schema: ../codeableConcept/CWE

  - name: xpn-name-validity-range-start
    value: [ '%resource.extension(%`rsext-xpn10-name-validity-range`).extension(%`rsext-xpn10-name-validity-start`).value' ]
    hl7Spec: [ '%{xpnField}-10-1' ]

  - name: xpn-name-validity-range-end
    value: [ '%resource.extension(%`rsext-xpn10-name-validity-range`).extension(%`rsext-xpn10-name-validity-end`).value' ]
    hl7Spec: [ '%{xpnField}-10-2' ]

  - name: xpn-name-assembly-order
    value: [ '%resource.extension(%`ext-humanname-assembly-order`).value' ]
    hl7Spec: [ '%{xpnField}-11' ]

  - name: effective-date
    value: [ '%resource.extension(%`rsext-xpn12-effective-date`).value' ]
    hl7Spec: [ '%{xpnField}-12' ]

  - name: expiration-date
    value: [ '%resource.extension(%`rsext-xpn13-expiration-date`).value' ]
    hl7Spec: [ '%{xpnField}-13' ]

  - name: xpn-suffix
    value: [ '%resource.extension(%`rsext-xpn14-professional-suffix`).value' ]
    hl7Spec: [ '%{xpnField}-14' ]