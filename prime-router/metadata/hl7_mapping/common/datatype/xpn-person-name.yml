elements:
  - name: family-name
    value: [ '%deidentifiedValue', '%resource.family' ]
    hl7Spec: [ '%{hl7NameField}-1' ]

  - name: family-own-surname
    condition: '%resource.family.extension(%`ext-humanname-own-name`).exists()'
    value: [ '%deidentifiedValue', '%resource.family.extension(%`ext-humanname-own-name`).value' ]
    hl7Spec: [ '%{hl7NameField}-1-3' ]

  - name: family-own-surname-prefix
    condition: '%resource.family.extension(%`ext-humanname-own-name-prefix`).exists()'
    value: [ '%deidentifiedValue', '%resource.family.extension(%`ext-humanname-own-name-prefix`).value' ]
    hl7Spec: [ '%{hl7NameField}-1-2' ]

  - name: family-surname-from-partner-or-spouse
    condition: '%resource.family.extension(%`ext-humanname-partner-name`).exists()'
    value: [ '%deidentifiedValue', '%resource.family.extension(%`ext-humanname-partner-name`).value' ]
    hl7Spec: [ '%{hl7NameField}-1-5' ]

  - name: family-surname-from-partner-or-spouse-prefix
    condition: '%resource.family.extension(%`ext-humanname-partner-prefix`).exists()'
    value: [ '%deidentifiedValue', '%resource.family.extension(%`ext-humanname-partner-prefix`).value' ]
    hl7Spec: [ '%{hl7NameField}-1-4' ]

  - name: given-name
    condition: '%resource.given.exists()'
    value: [ '%deidentifiedValue','%resource.given[0]' ]
    hl7Spec: [ '%{hl7NameField}-2' ]

  - name: second-name
    condition: '%resource.given.count() >= 2'
    value: [ '%deidentifiedValue','%resource.given.tail().toString().replace('','', '' '')' ]
    hl7Spec: [ '%{hl7NameField}-3' ]

  - name: use
    condition: '%resource.exists()'
    value:
      - '%resource.use'
    hl7Spec: [ '%{hl7NameField}-7' ]
    valueSet:
      values:
        official: L
        usual: D
        maiden: M
        nickname: N
        anonymous: S