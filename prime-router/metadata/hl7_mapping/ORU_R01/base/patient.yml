name: ORU-R01-patient
constants:
  hl7PIDField: /PATIENT_RESULT/PATIENT/PID
elements:
  - name: set-id
    value: [ '''1''' ]
    hl7Spec: [ '%{hl7PIDField}-1' ]

#  - name: patient-id
#    condition: '%resource is Patient and %resource.identifier.exists()'
#    value: [ '%resource.identifier.value' ]
#    hl7Spec: [ '%{hl7PIDField}-2' ]

  - name: patient-identifier-list
    resource: '%resource.identifier'
    constants:
      hl7CXField: 'PID-3'
    schema: cx-extended-composite-id
    resourceIndex: idIndex

  - name: patient-name
    resource: '%resource.name'
    condition: '%resource.exists()'
    constants:
      hl7NameField: '/PATIENT_RESULT/PATIENT/PID-5'
    schema: human-name

  - name: patient-dob
    value: [ '%resource.birthDate' ]
    hl7Spec: [ '%{hl7PIDField}-7' ]

  - name: patient-sex
    value: [ '%resource.gender.GetAdministrativeGenderCode()' ]
    hl7Spec: [ '%{hl7PIDField}-8' ]