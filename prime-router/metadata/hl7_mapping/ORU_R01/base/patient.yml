name: ORU-R01-patient
constants:
  hl7PIDField: /PATIENT_RESULT/PATIENT/PID
elements:
  - name: set-id
    value: [ '''1''' ]
    hl7Spec: [ '%{hl7PIDField}-1' ]

#  - name: patient-id
#    condition: '%resource is Patient and %resource.identifier.exists()'
#    value: [ '%resource.identifier.value' ]
#    hl7Spec: [ '%{hl7PIDField}-2' ]

  - name: patient-identifier-list
    resource: '%resource.identifier'
    constants:
      hl7CXField: 'PID-3'
    schema: cx-extended-composite-id
    resourceIndex: idIndex

  - name: patient-last-name
    condition: '%resource is Patient and %resource.name.family.exists()'
    required: true
    value: [ '%resource.name.family' ]
    hl7Spec: [ '/PATIENT_RESULT/PATIENT/PID-5-1' ]

#  - name: patient-contact
#    resource: '%resource.contact[0]'
#    condition: '%resource.exists()'
#    schema: contact