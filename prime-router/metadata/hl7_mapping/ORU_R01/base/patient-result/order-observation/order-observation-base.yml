elements:
  - name: order-observation
    schema: order-observation

  - name: timing-quantity
    resource: '%resource.basedOn.resolve()'
    condition: >
      %resource.occurrence.repeat.bounds.start.exists() or
      %resource.occurrence.repeat.bounds.end.exists() or
      %resource.priority.exists() or
      %resource.extension(%`rsext-service-priority`).exists()
    schema: timing-quantity

  - name: observation
    schema: observation

  - name: specimen
    resource: '%resource.specimen.resolve().where(extension(%`rsext-hl7v2Segment`).value = "SPM") | %resource.specimen.resolve().where(extension(%`rsext-hl7v2Segment`).exists().not())'
    schema: specimen