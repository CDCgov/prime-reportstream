# Sender transform for Trusted Intermediary
elements:
  - name: message-date-time
    resource: 'Bundle.entry.resource.ofType(MessageHeader)'
    condition: '%resource.extension("https://reportstream.cdc.gov/fhir/StructureDefinition/msh-7-datetime-of-message").value.exists().not()'
    bundleProperty: '%resource.extension("https://reportstream.cdc.gov/fhir/StructureDefinition/msh-7-datetime-of-message").value[x]'
    value:
      - Bundle.entry.resource.ofType(Provenance).recorded.extension("https://reportstream.cdc.gov/fhir/StructureDefinition/hl7v2-date-time").value
      - Bundle.entry.resource.ofType(Provenance).recorded
      - Bundle.timestamp