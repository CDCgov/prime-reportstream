---
#
# This file runs in environments (ie. your desktop) where the 'localhost' host name resolves
#
- name: waters
  description: Test Sender from Waters
  jurisdiction: FEDERAL
  senders:
    - name: default
      organizationName: waters
      topic: covid-19
      customerStatus: active
      schemaName: waters/waters-covid-19
      format: CSV
  receivers:
    - name: "giang"
      organizationName: "waters"
      topic: "covid-19"
      customerStatus: active
      translation:
        schemaName: "waters/waters-covid-19"
        format: "CSV"
        defaults: { }
        nameFormat: "STANDARD"
        receivingOrganization: null
        type: "CUSTOM"
      jurisdictionalFilter:
        - "hasAtLeastOneOf(waters_submitter, sender_id)"
        - "orEquals(patient_state, GH, ordering_facility_state, GH)"
      qualityFilter:
        - "allowAll()"
      reverseTheQualityFilter: false
      deidentify: true
      timing:
        operation: "MERGE"
        numberPerDay: 1440
        initialTime: "00:00"
        timeZone: "EASTERN"
        maxReportCount: 10000
      description: ""
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
      externalName: null
    - name: "giang2"
      organizationName: "waters"
      topic: "covid-19"
      customerStatus: active
      translation:
        schemaName: "waters/waters-covid-19"
        format: "CSV"
        defaults: { }
        nameFormat: "STANDARD"
        receivingOrganization: null
        type: "CUSTOM"
      jurisdictionalFilter:
        - "hasAtLeastOneOf(waters_submitter, sender_id)"
        - "orEquals(patient_state, GH, ordering_facility_state, GH)"
      qualityFilter:
        - "allowAll()"
      reverseTheQualityFilter: false
      deidentify: true
      timing:
        operation: "MERGE"
        numberPerDay: 1440
        initialTime: "00:00"
        timeZone: "EASTERN"
        maxReportCount: 10000
      description: ""
      transport:
        storageName: "PartnerStorage"
        containerName: "hhsprotect"
        type: "BLOBSTORE"
      externalName: null

# 'ignore' is a test organization, designed to be safely usable across all our environments.
# It has a bunch of receivers, each given a useful fake name, eg, named after the format of the data, in some cases.
# Please try to always make the receiver name identical to the county jurisdictionalFilter name.
# This is to aid in readability.
- name: ignore
  description: FOR TESTING ONLY
  jurisdiction: FEDERAL
  filters:
    - topic: covid-19
      jurisdictionalFilter: [ "matches(ordering_facility_state, IG)" ]
    - topic: monkeypox
      jurisdictionalFilter: [ "matches(ordering_facility_state, IG)" ]
    - topic: full-elr
      jurisdictionalFilter:
        - "(%performerState.exists() and %performerState = 'IG') or (%patientState.exists() and %patientState = 'IG')"
      qualityFilter:
        - "(%hl7MessageType.exists() and %hl7MessageType = 'R01')"
  senders:
    - name: default
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      schemaName: primedatainput/pdi-covid-19
      format: CSV
    - name: ignore-full-elr      # Use this to test full-elr
      organizationName: ignore
      topic: full-elr
      customerStatus: active
      schemaName: metadata/fhir_transforms/senders/default-sender-transform
      format: HL7
    - name: ignore-fhir      # Use this to test fhir
      organizationName: ignore
      topic: full-elr
      customerStatus: active
      schemaName: metadata/fhir_transforms/senders/default-sender-transform
      format: FHIR
    - name: ignore-strac      # Use this to test sending strac data
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      schemaName: strac/strac-covid-19
      format: CSV
    - name: ignore-simple-report      # Use this to test sending simple_report data
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      schemaName: primedatainput/pdi-covid-19
      format: CSV
    - name: ignore-lifepoint      # Use this to test sending lifepoint data
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      schemaName: hl7/lifepoint-covid-19
      format: HL7
    - name: no-duplicates      # Use this to test sending simple_report with a dup check
      organizationName: ignore
      topic: covid-19
      customerStatus: active
      schemaName: primedatainput/pdi-covid-19
      allowDuplicates: false    # Duplicate data causes errors!!
      format: CSV
    - name: ignore-waters      # Use this to test sending waters data
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      schemaName: waters/waters-covid-19
      format: CSV
    - name: ignore-empty      # Use this to test sending data from the 'empty' schema
      organizationName: ignore
      topic: covid-19
      customerStatus: active
      schemaName: empty
      format: CSV
    - name: ignore-hl7      # Use this to test sending data from the HL7 schema
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      schemaName: hl7/test-covid-19
      format: HL7
    - name: ignore-monkeypox
      organizationName: ignore
      topic: monkeypox
      customerStatus: inactive
      schemaName: monkeypox
      format: HL7
  receivers:
    - name: CSV
      externalName: The CSV receiver for Ignore
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, CSV)" ]
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation:
        type: CUSTOM
        schemaName: az/az-covid-19
        format: CSV
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
    - name: FULL_ELR
      externalName: Ignore FULL_ELR
      organizationName: ignore
      topic: full-elr
      customerStatus: active
      jurisdictionalFilter: [ "(%performerState.exists() and %performerState = 'IG') or (%patientState.exists() and %patientState = 'IG')" ]
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation: !<HL7>
        schemaName: "metadata/hl7_mapping/receivers/STLTs/CO/CO"
        useTestProcessingMode: false
        useBatchHeaders: true
        type: "HL7"
        receivingApplicationName: "CO-ELR"
        receivingFacilityName: "CO"
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
    - name: FULL_ELR_FHIR
      externalName: Ignore FULL_ELR_FHIR
      organizationName: ignore
      topic: full-elr
      customerStatus: active
      jurisdictionalFilter: [ "(%performerState.exists() and %performerState = 'IG') or (%patientState.exists() and %patientState = 'IG')" ]
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation: !<FHIR>
        # Uncomment next line to verify fhir receiver transforms
        # schemaName: "metadata/fhir_transforms/receivers/fhir-transform-sample"
        type: "FHIR"
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
    - name: HL7
      externalName: Ignore HL7
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, HL7)" ]
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation:
        type: CUSTOM
        schemaName: fl/fl-covid-19
        format: HL7
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
    - name: HL7_MONKEYPOX
      externalName: Ignore Monkeypox
      organizationName: ignore
      topic: monkeypox
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, HL7_MONKEYPOX)" ]
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation:
        type: CUSTOM
        schemaName: monkeypox
        format: HL7
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
    - name: HL7_BATCH
      externalName: Ignore HL7_BATCH
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, HL7_BATCH)" ]
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation:
        type: CUSTOM
        schemaName: az/az-covid-19-hl7
        format: HL7_BATCH
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
    - name: HL7_BATCH_PPK
      externalName: Ignore HL7_BATCH PPK
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, HL7_BATCH)" ]
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation:
        type: CUSTOM
        schemaName: az/az-covid-19-hl7
        format: HL7_BATCH
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP-PPK
    - name: HL7_BATCH_PEM
      externalName: Ignore HL7_BATCH PEM
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, HL7_BATCH)" ]
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation:
        type: CUSTOM
        schemaName: az/az-covid-19-hl7
        format: HL7_BATCH
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP-PEM
    - name: AS2
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, AS2)" ]
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation:
        type: HL7
        useBatchHeaders: true
    - name: HL7_NULL     # Null Transport.
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, HL7_NULL)" ]
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation:
        type: CUSTOM
        schemaName: tx/tx-covid-19
        format: HL7_BATCH
    - name: BLOBSTORE
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, BLOBSTORE)" ]
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation:
        type: CUSTOM
        schemaName: hhsprotect/hhsprotect-covid-19
        format: CSV
      transport:
        type: BLOBSTORE
        storageName: PartnerStorage
        containerName: hhsprotect
    - name: SFTP_FAIL    # If you put "FAIL" in the receiver name, then the happy-path tests in TestReportStream will ignore them.
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, SFTP_FAIL)" ]
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation:
        type: CUSTOM
        schemaName: az/az-covid-19-hl7
        format: CSV
      transport:
        type: SFTP
        host: sftp_FAIL_BAD
        port: 2222
        filePath: ./upload_FAIL
    - name: QUALITY_PASS
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, QUALITY_PASS, removed)" ]
      qualityFilter:
        - hasValidDataFor(message_id,ordering_facility_county,ordering_facility_state)
        - hasAtLeastOneOf(message_id,blankField)
        - matches(ordering_facility_county, QUALITY_PASS)
      translation:
        type: CUSTOM
        schemaName: empty
        format: CSV
    - name: QUALITY_REVERSED
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, QUALITY_REVERSED, kept)" ]
      qualityFilter:
        - hasValidDataFor(message_id,ordering_facility_county,ordering_facility_state)
        - hasAtLeastOneOf(message_id,blankField)
        - matches(ordering_facility_county, QUALITY_REVERSED)
      # Get 'not(qualityFilter)'
      reverseTheQualityFilter: true
      translation:
        type: CUSTOM
        schemaName: empty
        format: CSV
    - name: QUALITY_ALL
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, QUALITY_ALL)" ]
      qualityFilter: [ "allowAll()" ]
      translation:
        type: CUSTOM
        schemaName: empty
        format: CSV
    - name: QUALITY_FAIL
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, QUALITY_FAIL)" ]
      qualityFilter: [ "hasValidDataFor(blankField)", "hasAtLeastOneOf(message_id,blankField)" ]
      translation:
        type: CUSTOM
        schemaName: empty
        format: CSV
    - name: OTC_PROCTORED_YYY
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, OTC_PROCTORED)" ]
      qualityFilter: [ "matches(test_authorized_for_otc, Y)","matches(test_authorized_for_home, Y)","matches(test_authorized_for_unproctored, Y)" ]
      translation:
        type: "CUSTOM"
        schemaName: "hhsprotect/hhsprotect-covid-19"
        format: "CSV"
      deidentify: true
    - name: OTC_PROCTORED_NYY
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, OTC_PROCTORED)" ]
      qualityFilter: [ "matches(test_authorized_for_otc, N)","matches(test_authorized_for_home, Y)","matches(test_authorized_for_unproctored, Y)" ]
      translation:
        type: "CUSTOM"
        schemaName: "hhsprotect/hhsprotect-covid-19"
        format: "CSV"
      deidentify: true
    - name: OTC_PROCTORED_NUNKUNK
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, OTC_PROCTORED)" ]
      qualityFilter: [ "matches(test_authorized_for_otc, N)","matches(test_authorized_for_home, UNK)","matches(test_authorized_for_unproctored, UNK)" ]
      translation:
        type: "CUSTOM"
        schemaName: "hhsprotect/hhsprotect-covid-19"
        format: "CSV"
      deidentify: true
    - name: EVERY_5_MINS
      externalName: Batches and Sends every 5 minutes.  For Load testing.
      organizationName: ignore
      topic: covid-19
      customerStatus: active
      jurisdictionalFilter: [ "matches(ordering_facility_county, EVERY_5_MINS)" ]
      timing:
        operation: MERGE
        numberPerDay: 288 # Every 5 minutes
        initialTime: 00:00
      translation:
        type: HL7
        useBatchHeaders: true
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
    - name: EVERY_15_MINS
      externalName: Batches and Sends every 15 minutes.  For Load testing.
      organizationName: ignore
      topic: covid-19
      customerStatus: active
      jurisdictionalFilter: [ "matches(ordering_facility_county, EVERY_15_MINS)" ]
      timing:
        operation: MERGE
        numberPerDay: 96 # Every 15 minutes
        initialTime: 00:00
      translation:
        type: HL7
        useBatchHeaders: true
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
    - name: EVERY_60_MINS
      externalName: Batches and Sends every 60 minutes.  For Load testing.
      organizationName: ignore
      topic: covid-19
      customerStatus: active
      jurisdictionalFilter: [ "matches(ordering_facility_county, EVERY_60_MINS)" ]
      timing:
        operation: MERGE
        numberPerDay: 24 # Every 60 minutes
        initialTime: 00:00
      translation:
        type: HL7
        useBatchHeaders: true
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
    - name: SETTINGS_TEST
      externalName: Used to test putting sender settings into the data, using ignore.ignore-empty
      organizationName: ignore
      topic: covid-19
      customerStatus: active
      jurisdictionalFilter: [ "matches(ordering_facility_county, SETTINGS_TEST)" ]
      qualityFilter: [ "allowAll()" ]
      # These three filters must match the settings for the ignore.ignore-empty Sender.
      routingFilter:
        - matches(sender_fullname, ignore.ignore-empty)
        - matches(sender_orgname, ignore)
      processingModeFilter:
        # Because ignore.ignore-empty has customerStatus = active
        - matches(processing_mode_code, P)
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation:
        type: CUSTOM
        schemaName: empty
        format: CSV
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
    - name: HL7_BATCH_LOCAL_TIME_CONVERT
      externalName: LocalTime HL7_BATCH
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, HL7_BATCH)" ]
      timeZone: PACIFIC
      dateTimeFormat: LOCAL
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation:
        type: HL7
        format: HL7_BATCH
        receivingApplicationName: IG-PACIFIC-LOCAL-TIME
        convertDateTimesToReceiverLocalTime: true
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
    - name: HL7_BATCH_OFFSET_TIME_CONVERT
      externalName: Offset HL7_BATCH
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, HL7_BATCH)" ]
      timeZone: PACIFIC
      dateTimeFormat: OFFSET
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation:
        type: HL7
        format: HL7_BATCH
        receivingApplicationName: IG-PACIFIC-OFFSET
        convertDateTimesToReceiverLocalTime: true
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
    - name: HL7_BATCH_OFFSET_TIME_UTC
      externalName: Offset UTC HL7_BATCH
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, HL7_BATCH)" ]
      timeZone: UTC
      dateTimeFormat: OFFSET
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation:
        type: HL7
        format: HL7_BATCH
        receivingApplicationName: IG-UTC-OFFSET
        convertDateTimesToReceiverLocalTime: true
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
    - name: REST_TEST
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, REST_TEST)" ]
      translation:
        type: HL7
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
        timeZone: EASTERN
      transport:
        type: REST
        authTokenUrl: http://rest-webservice:3001/token
        reportUrl: http://rest-webservice:3001/report
        headers:
          UPHN-INFOMAP: '{}'
    - name: SOAP_TEST
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, REST_TEST)" ]
      translation:
        type: HL7
      transport:
        type: SOAP
        endpoint: "http://soap-webservice:8080/castlemock/mock/soap/project/eUAvaN/BasicHttpBinding_IUploadFile"
        soapAction: "" #"http://nedss.state.pa.us/2012/B01/elrwcf/IUploadFile/UploadFiles"
        credentialName: null
      #        namespaces:
      #          "xmlns:elr": "http://nedss.state.pa.us/2012/B01/elrwcf"
      timing:
        operation: MERGE
        numberPerDay: 1440
        initialTime: 00:00
    - name: GAEN_TEST
      organizationName: ignore
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter: [ "matches(ordering_facility_county, REST_TEST)" ]
      timing: null
      translation:
        type: GAEN
      transport:
        type: GAEN
        uuidFormat: WA_NOTIFY
        uuidIV: 1
        apiUrl: ""

- name: historytest
  description: FOR TESTING SUBMISSION HISTORY
  jurisdiction: FEDERAL
  senders:
    - name: default
      organizationName: historytest
      topic: covid-19
      customerStatus: active
      schemaName: primedatainput/pdi-covid-19
      format: CSV

- name: simple_report
  description: PRIME's POC testing app
  jurisdiction: FEDERAL
  senders:
    - name: default
      organizationName: simple_report
      topic: covid-19
      customerStatus: active
      schemaName: primedatainput/pdi-covid-19
      format: CSV
    - name: csvuploader
      organizationName: simple_report
      topic: covid-19
      customerStatus: active
      schemaName: upload-covid-19
      format: CSV

- name: hcintegrations
  description: Healthcare Integrations
  jurisdiction: FEDERAL
  senders:
    - name: default
      organizationName: hcintegrations
      topic: covid-19
      customerStatus: active
      schemaName: hl7/hcintegrations-covid-19
      format: HL7

- name: oh-doh
  description: Ohio Department of Health
  jurisdiction: STATE
  stateCode: OH
  receivers:
    - name: elr
      organizationName: oh-doh
      topic: covid-19
      customerStatus: active
      jurisdictionalFilter:
        - matches(ordering_facility_state, OH)
      translation:
        type: HL7
        useBatchHeaders: true
        suppressQstForAoe: true
        receivingApplicationName: OHDOH
        receivingApplicationOID: 2.16.840.1.114222.4.1.3674
        receivingFacilityName: OHDOH
        receivingFacilityOID: 2.16.840.1.114222.4.1.3674
        reportingFacilityName: CDC PRIME
        reportingFacilityId: 36DSMP9999
        nameFormat: ohio
        suppressHl7Fields: OBX-23-11, MSH-19-1, MSH-19-2, MSH-19-3
        # turn off UNK and ASKU for this field
        useBlankInsteadOfUnknown: patient_race
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
        timeZone: EASTERN
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP

- name: hi-phd
  description: Hawaii Public Health Department
  jurisdiction: STATE
  stateCode: HI
  receivers:
    - name: elr
      organizationName: hi-phd
      topic: covid-19
      customerStatus: inactive
      jurisdictionalFilter:
        - orEquals(ordering_facility_state, HI, patient_state, HI)
      translation:
        type: HL7
        useBatchHeaders: true
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
        timeZone: EASTERN
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP


- name: ak-phd
  description: Alaska Public Health Department
  jurisdiction: STATE
  stateCode: AK
  receivers:
    - name: elr
      organizationName: ak-phd
      topic: covid-19
      customerStatus: active
      jurisdictionalFilter:
        - orEquals(ordering_facility_state, AK, patient_state, AK)
      translation:
        type: HL7
        useBatchHeaders: true
        suppressHl7Fields: PID-5-7, ORC-12-1, OBR-16-1
        replaceValue:
          PID-22-3: CDCREC
      timing:
        operation: MERGE
        numberPerDay: 1440
        initialTime: 00:00
        timeZone: EASTERN
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP

- name: md-phd
  description: TEST Maryland Public Health Department
  jurisdiction: STATE
  filters:
    - topic: covid-19
      jurisdictionalFilter: [ "orEquals(ordering_facility_state, MD, patient_state, MD)" ]
    - topic: full-elr
      jurisdictionalFilter: [ "(%performerState.exists() and %performerState = 'MD') or (%patientState.exists() and %patientState = 'MD')" ]
  stateCode: MD
  receivers:
    - name: elr
      organizationName: md-phd
      topic: covid-19
      customerStatus: active
      jurisdictionalFilter:
        - orEquals(patient_state, MD, ordering_facility_state, MD)
      translation:
        type: HL7
        useBatchHeaders: true
      timing:
        operation: MERGE
        numberPerDay: 1440
        initialTime: 00:00
        timeZone: EASTERN
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
# THIS ORGANIZATION IS FOR DEVELOPMENT PURPOSES ONLY - CHANGING IT WILL HAVE NO IMPACT ON TESTS
- name: "flexion"
  description: "Flexion, Inc."
  jurisdiction: "FEDERAL"
  stateCode: null
  countyName: null
  filters: []
  featureFlags: []
  keys:
    - scope: "flexion.*.report"
      keys:
        - kty: "RSA"
          kid: "flexion"
          "n": "ryF4s0w8tqeU5SPTb3g8o1DeODyoLM5PndLgJepiDz1ns1FMfHE4Hns9u-O_qQs3tyglzm6_tCXu1ok-r581iN_zYYHHzG4sEuHd7kbDF3cS5U57n_iKI0efru8Tht-DGDCHw503ZC85LUi1rtrf29wNSSHurZlwBI25iMxKYNoVm9F9A34MoPL53vuFvR0D1Sz5WOCaz2HvtjgSfaMaaU3bnDdKya_CeoNSt7vk4-uslhGku2ENOccP1iobNfbCD-xfMgDWPeX48Gnqm16VhWEtZocn-KHjt7qE1Q9r8yhOqodWHzGjP4cDR0hftowdv4d0oAxQaF9zITo7oJkPlQ"
          e: "AQAB"
        - kty: "RSA"
          kid: "flexion.simulated-hospital"
          "n": "yte6jSZhn-Y3z0QwvpltmOkSR2hh5WLn5CdGNkFJHzkjZQize17r_NxmC19zFIPVESUEiFUTuMINA_BNbNV4KXLlRCUAHpIojExakrMjEIwyTJfjT-_hHQ80A2IZS4cyEb3KbCr3tWg1K-XrDLzqROQifzjXpQf7baiFsA-oyUiusPE-tTGwBj30netC-NyINo1rrZDQ8mx_hGEYIiNOcCMheM7NyhZ-xPMFemBrisekjcNuEgvsA5qec_zGxEyHFVFhIGftjEcUewUGJE6QoVSQ0vh1B5wcDMWSq0u9XiDniWkujTV_X0HghXiA54nxo-IN_gtu7bbrTFzY0Z6jMi1GLbGJzFUrdVHXB6xEnUfycFjPd-4E-D86kUGVO6QebK6heTejy-RV-ivbPkfph6vGIHetDjoeMXttuZFhW_4YOmXpgkLCS-tpIYpnHp_YoxkNLPs9Ha08ZblaQe4WxPpqB0Sd1c10UMGFtLuqrhv9ucxsPXxNhw0sl6P8D7a_m_KYv3Xs7-sU-X6wnvnrjKZu2aeNQqKDqAze1UQy6kLv4fyDkl9qveawfJltU4qBGfXchRTTk74Mr305g1RSrLjOtdMQ8sxGGFaKBJ2EQYYVN4b-bxwhGaQ3fYGe2atablvWoojgVHejUEWWS17_j2cGn7_qavjDZjRwuvmrXHE"
          e: "AQAB"
        - kty: "RSA"
          kid: "flexion.simulated-hospital"
          "n": "so0MxlqSsxQCMjEpaKlSC2bXdmLd7FsrCs0lz64n7EzObn4DGbwa6RkVysSoTEtEDsGnnjf3FwRJWS-w8vbzJVfy7GtHMRJ95G01kIBobWuXo9kvRKaCaQt9jZYqYnG2bStVhj4Lu1he1K6oWLTQBru2qWcxKj8WszPgMX9i0bXE4PVB27k3dRA9opjY-whErz0m0E_e7HPNG9FH7c00CgSJVY9Slmd9cS-XpNeDz95XbpAjizfbP9A5tW0KrOnYIkq9y2fSW8Jzv4ZNC6W0BiLqsLu1jLnJ5GZ5C60yOr65rHPLsFCsTDcI0LJEoPOwllsEB5flPmkcFc_jiUcruw"
          e: "AQAB"
        - kty: "RSA"
          kid: "flexion.etor-service-sender"
          "n": "wRcaRslCc0BttqJpwxamdndcFYZZin158PAdGSyxuo671hKnuM2GVA70Yvy9ySTWyu67gl8gvoCtY_A2pTAdzkrz24_g0P5uxQSERNRAP60UxWIpnC3EG45c5OvsYANkKWZSALlYyw8-zYxsMtCCjhiX1PqvScq5FcisWs3QvDyHQJwuA0P_NYy44MPxq70lWLnfeCQ5t87JnB717qiLK-j8i_u5AWfZsaCp6z1GR1NmRwzZU6YABC6wq6OheZPQPeStXRTIbA2KRZvy7QJLrFefNXvMipCdOx6npELOirhUkTr8-fb5fwpKW3-yXbaw46kgAK_etUeRgvidwfYwaxDkTHDqPwmGnL0KOhidm7ibMuPjKQ0SD2Td__ytdSr-dP8Q4vqlUxAdn_mYVAm4rO7Uqc0BAiuFSt_lby4JQntVNj6VWuPb07CaOxtOAVGg7p_52PDAXL-amg_pOfrN0vNm3YWKb8KNc_uk-5WsVKotOSuMON67pih271RCZrGJgncAr7UOj2_MiwOiDG4-_C8OIgv5Vd80PuyXcMSQaUFVO_vIznMuqviOoO5rMM_-yXcbK_FqynnnHmv9yBAnFfpVgk2XzguVr9Mjc24NJSxnVN_z6sqvvHLslq8yXCBQrGdX7GQZpDtbMEH7123USID20bXG5DtZdJfURGy5_Gs"
          e: "AQAB"
  senders:
    - !<full-elr>
      name: "simulated-hospital"
      organizationName: "flexion"
      format: "FHIR"
      customerStatus: "active"
      keys: null
      processingType: "sync"
      allowDuplicates: true
      senderType: null
      primarySubmissionMethod: null
      topic: "full-elr"
      version: null
      createdBy: null
      createdAt: null
    - !<full-elr>
      name: "etor-service-sender"
      organizationName: "flexion"
      format: "FHIR"
      customerStatus: "active"
      keys: null
      processingType: "sync"
      allowDuplicates: true
      senderType: null
      primarySubmissionMethod: null
      topic: "full-elr"
      version: null
      createdBy: null
      createdAt: null
  receivers:
    - name: FULL-ELR-FHIR
      externalName: Ignore FULL-ELR-FHIR
      organizationName: flexion
      topic: full-elr
      customerStatus: active
      jurisdictionalFilter: [ "(%patientState.exists() and %patientState = 'IG')" ]
      qualityFilter: [ "(%patientState.exists() and %patientState = 'IG')" ]
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
      translation: !<FHIR>
        schemaName: "metadata/fhir_transforms/receivers/fhir-transform-sample"
        type: "FHIR"
        useBatching: false
      transport: !<REST>
        reportUrl: "http://192.168.1.180:8080/v1/etor/demographics"
        authTokenUrl: "http://rest-webservice:3001/token"
        headers:
          mock-h1: "value-h1"
          mock-h2: "value-h2"
        type: "REST"
- name: sd-phd
  description: "South Dakota Public Health Department"
  jurisdiction: "STATE"
  stateCode: SD
  receivers:
    - name: elr
      organizationName: sd-phd
      topic: covid-19
      customerStatus: testing
      jurisdictionalFilter:
        - orEquals(ordering_facility_state, SD, patient_state, SD)
      timeZone: EASTERN
      dateTimeFormat: LOCAL
      translation:
        type: HL7
        useBatchHeaders: false
        receivingApplicationName: SDPHD
        receivingApplicationOID: 2.16.840.1.114222.4.3.3.36
        receivingFacilityName: SDPHD
        receivingFacilityOID: 2.16.840.1.114222.4.3.2.2.1.163
        reportingFacilityName: "CDC PRIME"
        reportingFacilityId: "11D2030855"
        suppressQstForAoe: true
        truncateHDNamespaceIds: true
        suppressHl7Fields: null
        truncateHl7Fields: null
        replaceValueAwithB: null
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
        timeZone: EASTERN
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
- name: primary
  description: Primary Diagnostics, Inc. (primary.health)
  jurisdiction: FEDERAL
  senders:
    - name: default
      organizationName: primary
      topic: covid-19
      customerStatus: active
      schemaName: hl7/primary-covid-19
      format: HL7
- name: ks-doh
  description: Kansas Department Of Health
  jurisdiction: STATE
  stateCode: KS
  receivers:
    - name: elr
      organizationName: ks-doh
      topic: covid-19
      customerStatus: testing
      jurisdictionalFilter:
        - orEquals(ordering_facility_state, KS, patient_state, KS)
      timeZone: CENTRAL
      dateTimeFormat: LOCAL
      translation:
        type: HL7
        useBatchHeaders: true
        receivingApplicationName: KSDOH
        receivingApplicationOID: 2.16.840.1.114222.4.3.3.36
        receivingFacilityName: KDHE
        receivingFacilityOID: 2.16.840.1.114222.4.3.2.2.1.163
        reportingFacilityName: "CDC PRIME"
        reportingFacilityId: "11D2030855"
        suppressQstForAoe: true
        truncateHDNamespaceIds: true
        suppressHl7Fields: null
        truncateHl7Fields: null
        replaceValueAwithB: null
      timing:
        operation: MERGE
        numberPerDay: 1440 # Every minute
        initialTime: 00:00
        timeZone: CENTRAL
      transport:
        type: SFTP
        host: sftp
        port: 22
        filePath: ./upload
        credentialName: DEFAULT-SFTP
