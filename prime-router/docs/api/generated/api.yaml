openapi: 3.0.1
info:
  title: Prime ReportStream
  description: A router of public health data from multiple senders and receivers
  contact:
    name: USDS at Centers for Disease Control and Prevention
    url: https://reportstream.cdc.gov
    email: "email: reportstream@cdc.gov"
  version: 0.2.0-oas3
paths:
  /settings/organizations/{organizationName}/public-keys/{scope}/{kid}:
    delete:
      tags:
      - Public Key Management
      summary: Delete key endpoint
      description: Test delete
      operationId: delete
      requestBody:
        content:
          '*/*':
            schema:
              $ref: '#/components/schemas/HttpRequestMessageString'
      responses:
        "401":
          description: Unauthorized
        "404":
          description: "Org, scope, or KID not found"
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiKeysResponse'
      security:
      - primeSecurity: []
components:
  schemas:
    ApiKeysResponse:
      type: object
      properties:
        orgName:
          type: string
        keys:
          type: array
          items:
            $ref: '#/components/schemas/JwkSet'
    Jwk:
      type: object
      properties:
        kty:
          type: string
          description: "The family of cryptographic algorithms used with the key.\
            \  eg, RSA, EC, oct"
        kid:
          type: string
          description: The exponent for the RSA public key
        "n":
          type: string
          description: The modulus for the RSA public key
        e:
          type: string
          description: The exponent for the RSA public key
    JwkSet:
      type: object
      properties:
        scope:
          type: string
        keys:
          type: array
          items:
            $ref: '#/components/schemas/Jwk'
    HttpResponseMessage:
      type: object
      properties:
        statusCode:
          type: integer
          format: int32
        body:
          type: object
        status:
          $ref: '#/components/schemas/HttpStatusType'
    HttpStatusType:
      type: object
    HttpRequestMessageString:
      type: object
      properties:
        headers:
          type: object
          additionalProperties:
            type: string
        queryParameters:
          type: object
          additionalProperties:
            type: string
        body:
          type: string
        uri:
          type: string
          format: uri
        httpMethod:
          type: string
          enum:
          - GET
          - HEAD
          - POST
          - PUT
          - DELETE
          - CONNECT
          - OPTIONS
          - TRACE
          - PATCH
  securitySchemes:
    primeSecurity:
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: https://hhs-prime.okta.com/oauth/authorize
          tokenUrl: https://hhs-prime.okta.com/oauth/token
          scopes:
            org_admin: Grants write access to single org
            system_admin: Grants access to admin operations
            user: Grants read access
