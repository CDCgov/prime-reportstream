paths:
  token:
    post:
      description: Generate and return a new token for the requested scope
      security:
        - OAuth2: [ user ]
      requestBody:
        description: Parameters should be sent in the request body.
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                scope:
                  type: string
                  description: Permission being requested. Format is orgName.senderName.desiredPermission. Example "strac.default.report"
                grant_type:
                  type: string
                  description: The value should always be "client_credentials"
                client_assertion_type:
                  type: string
                  description:   The value should always be "urn:ietf:params:oauth:client-assertion-type:jwt-bearer"
                client_assertion:
                  type: string
                  description: signed JWT from the sender. See https://github.com/CDCgov/prime-reportstream/blob/master/prime-router/docs/playbooks/how-to-use-token-auth.md
      responses:
        '200':
          description: the token was created and returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TableVersionInfo'
        '400':
          description: bad request
        '401':
          description: unauthorized

